(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1a68c1bd"],{"0081":function(t,r,e){"use strict";e("f00e")},"99af":function(t,r,e){"use strict";var o=e("23e7"),a=e("d039"),s=e("e8b5"),c=e("861d"),i=e("7b0b"),n=e("50c4"),u=e("8418"),d=e("65f0"),l=e("1dde"),p=e("b622"),g=e("2d00"),f=p("isConcatSpreadable"),b=9007199254740991,h="Maximum allowed index exceeded",m=g>=51||!a((function(){var t=[];return t[f]=!1,t.concat()[0]!==t})),y=l("concat"),v=function(t){if(!c(t))return!1;var r=t[f];return void 0!==r?!!r:s(t)},_=!m||!y;o({target:"Array",proto:!0,forced:_},{concat:function(t){var r,e,o,a,s,c=i(this),l=d(c,0),p=0;for(r=-1,o=arguments.length;r<o;r++)if(s=-1===r?c:arguments[r],v(s)){if(a=n(s.length),p+a>b)throw TypeError(h);for(e=0;e<a;e++,p++)e in s&&u(l,p,s[e])}else{if(p>=b)throw TypeError(h);u(l,p++,s)}return l.length=p,l}})},adbc:function(t,r,e){"use strict";e.r(r);var o=function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("div",[e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(r){t.isLoading=r}}}),e("Alert"),e("div",{staticClass:"row mx-0"},[e("div",{staticClass:"col-md-3 col-sm-12 pl-0"},[e("ul",{staticClass:"list-group border border-primary"},[e("li",{staticClass:"list-group-item d-flex justify-content-between\n          align-items-center border-bottom p-2",on:{click:function(r){return t.filterProducts("all")}}},[t._v(" 所有商品 "),e("span",{staticClass:"badge badge-primary badge-pill"},[t._v(t._s(t.products.length))])]),e("li",{staticClass:"list-group-item d-flex justify-content-between\n          align-items-center border-bottom p-2",on:{click:function(r){return t.filterProducts("table")}}},[t._v(" 桌花 "),e("span",{staticClass:"badge badge-primary badge-pill"},[t._v(t._s(t.productsTable.length))])]),e("li",{staticClass:"list-group-item d-flex justify-content-between\n          align-items-center border-bottom p-2",on:{click:function(r){return t.filterProducts("bouquet")}}},[t._v(" 花束 "),e("span",{staticClass:"badge badge-primary badge-pill"},[t._v(t._s(t.productsBouquet.length))])]),e("li",{staticClass:"list-group-item d-flex justify-content-between align-items-center p-2",on:{click:function(r){return t.filterProducts("wedding")}}},[t._v(" 捧花 "),e("span",{staticClass:"badge badge-primary badge-pill"},[t._v(t._s(t.productsWedding.length))])])])]),e("div",{staticClass:"col-md-9 col-sm-12 border border-primary d-flex flex-row flex-wrap h-auto py-3"},[e("div",{staticClass:"d-flex flex-row flex-wrap h-auto py-3"},[t._l(t.productsNow,(function(r){return e("div",{key:r.id,staticClass:"card mx-auto my-3",staticStyle:{width:"250px"}},[e("div",{staticClass:"content-shadow"},[e("div",{on:{click:function(e){return t.getProduct(r.id)}}},[e("div",{staticStyle:{height:"300px","background-size":"cover","background-position":"center"},style:{backgroundImage:"url("+r.imageUrl+")"}}),e("div",{staticClass:"card-body"},[e("span",{staticClass:"badge badge-primary float-right ml-2"},[t._v(" "+t._s(r.category)+" ")]),e("h5",{staticClass:"card-title"},[e("a",{staticClass:"text-primary",attrs:{href:"#"}},[t._v(t._s(r.title))])]),e("div",{staticClass:"d-flex justify-content-between align-items-baseline"},[r.price?t._e():e("div",{staticClass:"h5 text-primary"},[t._v(" NT "+t._s(t._f("currency")(r.origin_price))+" ")]),r.price?e("del",{staticClass:"h6 text-primary"},[t._v("NT "+t._s(t._f("currency")(r.origin_price))+" ")]):t._e(),r.price?e("div",{staticClass:"h5 text-danger"},[t._v(" NT "+t._s(t._f("currency")(r.price))+" ")]):t._e()])])]),e("div",{staticClass:"card-footer d-flex justify-content-between"},[e("button",{staticClass:"btn btn-outline-primary btn-sm",attrs:{type:"button"},on:{click:function(e){return t.getProduct(r.id)}}},[t.status.loadingItem===r.id?e("i",{staticClass:"fas fa-spinner fa-spin"}):t._e(),t._v(" 查看更多 ")]),e("button",{staticClass:"btn btn-outline-danger btn-sm ml-2",attrs:{type:"button"},on:{click:function(e){return t.addtoStorage(r)}}},[t.status.loadingItem===r.id&&!0===t.inCar?e("i",{staticClass:"fas fa-spinner fa-spin"}):t._e(),t._v(" 加到購物車 ")])])])])})),e("div",{staticClass:"mx-auto my-3",staticStyle:{width:"250px"}}),e("div",{staticClass:"mx-auto my-3",staticStyle:{width:"250px"}})],2)])])],1)},a=[],s=(e("99af"),e("4de4"),e("159b"),e("caad"),e("a434"),e("56a6")),c={components:{Alert:s["a"]},data:function(){return{products:[],product:{},status:{loadingItem:""},isLoading:!1,productsTable:[],productsBouquet:[],productsWedding:[],productsNow:[],breadcrumbCategory:"所有商品",cartStorage:JSON.parse(localStorage.getItem("cartList"))||[],inCar:!1}},methods:{getProducts:function(t){var r="".concat("https://vue-course-api.hexschool.io","/api/").concat("flora","/products/all"),e=this;e.isLoading=!0,e.$http.get(r).then((function(r){e.isLoading=!1,e.products=r.data.products,e.$router.push("/shop/product_show/".concat(t)).catch((function(){})),e.productsTable=e.products.filter((function(t){return"桌花"===t.category})),e.productsBouquet=e.products.filter((function(t){return"花束"===t.category})),e.productsWedding=e.products.filter((function(t){return"捧花"===t.category})),"all"===t||void 0===t?(e.productsNow=e.products,e.breadcrumbCategory="所有商品",e.$router.push("/shop/product_show/all").catch((function(){}))):"table"===t?(e.productsNow=e.productsTable,e.breadcrumbCategory="桌花",e.$router.push("/shop/product_show/table").catch((function(){}))):"bouquet"===t?(e.productsNow=e.productsBouquet,e.breadcrumbCategory="花束",e.$router.push("/shop/product_show/bouquet").catch((function(){}))):"wedding"===t&&(e.productsNow=e.productsWedding,e.breadcrumbCategory="捧花",e.$router.push("/shop/product_show/wedding").catch((function(){})))}))},getProduct:function(t){var r="".concat("https://vue-course-api.hexschool.io","/api/").concat("flora","/product/").concat(t),e=this;e.status.loadingItem=t,e.isLoading=!0,e.$http.get(r).then((function(r){e.isLoading=!1,e.product=r.data.product,e.$router.push("/shop/product_detail/".concat(t)).catch((function(){})),e.status.loadingItem=""}))},addtoStorage:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,e=this,o=[];if(e.cartStorage.forEach((function(t){o.push(t.product_id)})),o.includes(t.id)){var a={};e.inCar=!0,e.cartStorage.forEach((function(o,s){if(o.product_id===t.id){var c=o.qty;a={product_id:t.id,qty:c+=r},e.cartStorage.splice(s,1)}})),e.cartStorage.push(a),localStorage.removeItem("cartList"),localStorage.setItem("cartList",JSON.stringify(e.cartStorage)),e.$bus.$emit("message:push","已加入購物車","success"),e.$bus.$emit("put"),e.inCar=!1}else{var s={product_id:t.id,qty:r};e.inCar=!0,e.cartStorage.push(s),localStorage.removeItem("cartList"),localStorage.setItem("cartList",JSON.stringify(e.cartStorage)),e.$bus.$emit("message:push","已加入購物車","success"),e.$bus.$emit("put"),e.inCar=!1}},filterProducts:function(t){var r=this;"all"===t?(r.productsNow=r.products,r.breadcrumbCategory="所有商品",r.$router.push("/shop/product_show/all").catch((function(){}))):"table"===t?(r.productsNow=r.productsTable,r.breadcrumbCategory="桌花",r.$router.push("/shop/product_show/table").catch((function(){}))):"bouquet"===t?(r.productsNow=r.productsBouquet,r.breadcrumbCategory="花束",r.$router.push("/shop/product_show/bouquet").catch((function(){}))):"wedding"===t&&(r.productsNow=r.productsWedding,r.breadcrumbCategory="捧花",r.$router.push("/shop/product_show/wedding").catch((function(){})))}},created:function(){this.getProducts(this.$route.params.cat)}},i=c,n=(e("0081"),e("2877")),u=Object(n["a"])(i,o,a,!1,null,"793c3b8b",null);r["default"]=u.exports},f00e:function(t,r,e){}}]);
//# sourceMappingURL=chunk-1a68c1bd.f4e4fccd.js.map